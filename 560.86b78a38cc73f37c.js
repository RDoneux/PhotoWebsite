"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[560],{8560:(A,f,r)=>{r.r(f),r.d(f,{GalleryModule:()=>p});var g=r(6895),h=r(6773),u=r(5861),e=r(8256),y=r(529),I=r(2043),x=r(109),C=r(8897);const v=["galleryImage"],O=function(s,i,t,n,a){return{"primary-image":s,"secondary-image-left":i,"secondary-image-right":t,"terchery-image-left":n,"terchery-image-right":a}};function M(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"img",1,2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onClick())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("ngClass",e.qbA(2,O,t.targetImageIndex===t.index,t.index!==t.targetImageIndex&&t.index===t.targetImageIndex-1,t.index!==t.targetImageIndex&&t.index===t.targetImageIndex+1,t.index!==t.targetImageIndex&&t.index===t.targetImageIndex-2,t.index!==t.targetImageIndex&&t.index===t.targetImageIndex+2))("src",t.src,e.LSH)}}class o{constructor(){this.src=void 0,this.index=void 0,this.targetImageIndex=void 0,this.clicked=new e.vpe,this.galleryImage=void 0,this.imageStatus="terchary"}ngOnInit(){}onClick(){console.log(this.index," @ ",this.galleryImage),this.clicked.emit({index:this.index??0,width:this.galleryImage?.nativeElement.width})}static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-image-slider-image"]],viewQuery:function(t,n){if(1&t&&e.Gf(v,5),2&t){let a;e.iGM(a=e.CRH())&&(n.galleryImage=a.first)}},inputs:{src:"src",index:"index",targetImageIndex:"targetImageIndex"},outputs:{clicked:"clicked"},decls:2,vars:2,consts:[["class","gallery-image","referrerpolicy","no-referrer",3,"ngClass","src","click",4,"ngIf"],["referrerpolicy","no-referrer",1,"gallery-image",3,"ngClass","src","click"],["galleryImage",""]],template:function(t,n){1&t&&(e.YNc(0,M,2,8,"img",0),e._uU(1)),2&t&&(e.Q6J("ngIf",void 0!==n.index&&null!=n.targetImageIndex),e.xp6(1),e.hij("\n",n.index,"\n"))},dependencies:[g.mk,g.O5],styles:["[_nghost-%COMP%]{display:block}.gallery-image[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;position:relative}"]})}function P(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"app-image-slider-image",7),e.NdJ("clicked",function(a){e.CHM(t);const _=e.oxw(2);return e.KtG(_.imageClicked(a))}),e.qZA()}if(2&s){const t=i.$implicit,n=i.index,a=e.oxw(2);e.noy("--i: ",n,"; --image-rotation: ",360/(a.images.length+2<=a.minImageNumber?a.minImageNumber:a.images.length+2),"deg;  --image-number: ",a.images.length+2<=a.minImageNumber?a.minImageNumber:a.images.length+2,"px"),e.Q6J("src",t.url)("index",n)("targetImageIndex",a.targetImageIndex)}}function Z(s,i){if(1&s&&(e.TgZ(0,"div",5),e.YNc(1,P,1,8,"app-image-slider-image",6),e.qZA()),2&s){const t=e.oxw();e.Jzz("--desired-rotation: ",t.desiredRotation,"deg"),e.xp6(1),e.Q6J("ngForOf",t.images)}}class m{constructor(){this.images=void 0,this.galleryImageOffset="translateX(0)",this.imageWidth=34,this.targetImageIndex=0,this.desiredRotation=0,this.minImageNumber=7}ngAfterViewInit(){console.log(this.images)}imageClicked(i){!this.images||(this.galleryImageOffset=`translateX(-${i.width*i.index}px)`,this.imageWidth=i.width/2,this.targetImageIndex=i.index,this.targetImageIndex=1,this.desiredRotation=-360/(this.images.length+2<=this.minImageNumber?this.minImageNumber:this.images.length+2)*i.index,console.log(this.desiredRotation,i.index))}static#e=this.\u0275fac=function(t){return new(t||m)};static#t=this.\u0275cmp=e.Xpm({type:m,selectors:[["app-image-slider"]],inputs:{images:"images"},decls:11,vars:1,consts:[[1,"image-slider__container"],["src","https://lh3.googleusercontent.com/d/1OxTe7jS0sX_plnvL9mHGK1nucSvLvqSo",1,"image-slider__primary-image"],[1,"image-slider__primary-image-information"],[1,"image-slider__primary-image-title"],["class","image-slider__gallery-container",3,"style",4,"ngIf"],[1,"image-slider__gallery-container"],["class","image-slider__gallery-image",3,"style","src","index","targetImageIndex","clicked",4,"ngFor","ngForOf"],[1,"image-slider__gallery-image",3,"src","index","targetImageIndex","clicked"]],template:function(t,n){1&t&&(e.TgZ(0,"span",0),e._UZ(1,"img",1),e.TgZ(2,"div",2)(3,"h3",3),e._uU(4,"image title"),e.qZA(),e.TgZ(5,"span")(6,"h5"),e._uU(7,"image author"),e.qZA(),e.TgZ(8,"h5"),e._uU(9,"date taken"),e.qZA()()(),e.YNc(10,Z,2,4,"div",4),e.qZA()),2&t&&(e.xp6(10),e.Q6J("ngIf",n.images))},dependencies:[g.sg,g.O5,o],styles:["[_nghost-%COMP%]{display:block}.image-slider__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}.image-slider__container[_ngcontent-%COMP%]   .image-slider__primary-image[_ngcontent-%COMP%]{width:100%;height:60%;object-fit:cover}.image-slider__container[_ngcontent-%COMP%]   .image-slider__primary-image-information[_ngcontent-%COMP%]{text-align:center}.image-slider__container[_ngcontent-%COMP%]   .image-slider__primary-image-information[_ngcontent-%COMP%]   .image-slider__primary-image-title[_ngcontent-%COMP%]{margin:0}.image-slider__container[_ngcontent-%COMP%]   .image-slider__primary-image-information[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-around}.image-slider__container[_ngcontent-%COMP%]   .image-slider__primary-image-information[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;display:block}.image-slider__container[_ngcontent-%COMP%]   .image-slider__gallery-container[_ngcontent-%COMP%]{height:calc(40% - 157px);width:33%;transform-style:preserve-3d;transition:transform .5s ease-in-out;transform:perspective(1000px) rotateY(var(--desired-rotation))}.image-slider__container[_ngcontent-%COMP%]   .image-slider__gallery-container[_ngcontent-%COMP%]   .image-slider__gallery-image[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;top:0;left:0;transform-origin:center;transform-style:preserve-3d;transform:rotateY(calc(var(--i) * var(--image-rotation))) translateZ(calc(var(--image-number) * 20))}"]})}class c{constructor(i,t,n){this.activiatedRoute=i,this.httpClient=t,this.authorisationService=n,this.images=void 0}ngOnInit(){var t,i=this;this.activiatedRoute.queryParams.subscribe({next:(t=(0,u.Z)(function*(n){const a=n.id,_=yield i.authorisationService.getBearerToken();i.httpClient.get(`api/collections/${a}/images`,{headers:{Authorization:_}}).subscribe({next:k=>{i.images=k.data.images}})}),function(a){return t.apply(this,arguments)})})}static#e=this.\u0275fac=function(t){return new(t||c)(e.Y36(h.gz),e.Y36(y.eN),e.Y36(I.g))};static#t=this.\u0275cmp=e.Xpm({type:c,selectors:[["app-gallery"]],decls:5,vars:1,consts:[[1,"gallery__page-wrapper"],[2,"height","calc(100vh - 104px)",3,"images"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-nav-bar"),e.TgZ(2,"app-page-title"),e._uU(3,"Gallery"),e.qZA(),e._UZ(4,"app-image-slider",1),e.qZA()),2&t&&(e.xp6(4),e.Q6J("images",n.images))},dependencies:[x.w,C.T,m],styles:[".gallery__page-wrapper[_ngcontent-%COMP%]{padding:0 1rem 1rem;display:flex;flex-direction:column;height:100%}"]})}const T=[{path:"",component:c}];class l{static#e=this.\u0275fac=function(t){return new(t||l)};static#t=this.\u0275mod=e.oAB({type:l});static#i=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(T),h.Bz]})}var S=r(8411),w=r(2873);class d{static#e=this.\u0275fac=function(t){return new(t||d)};static#t=this.\u0275mod=e.oAB({type:d});static#i=this.\u0275inj=e.cJS({imports:[g.ez]})}class p{static#e=this.\u0275fac=function(t){return new(t||p)};static#t=this.\u0275mod=e.oAB({type:p});static#i=this.\u0275inj=e.cJS({imports:[g.ez,l,S.R,w.p,d]})}}}]);