"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[134],{1952:(O,d,r)=>{r.r(d),r.d(d,{ImageManagerModule:()=>v});var s=r(6895),p=r(6773),n=r(8256),C=r(5861),M=r(529),b=r(1588),P=r(2043),y=r(1195);class u{constructor(){this.fileDropped=new n.vpe,this.background="#ffffff"}dragOver(t){t.preventDefault(),t.stopPropagation(),this.background="#e2eefd"}dragLeave(t){t.preventDefault(),t.stopPropagation(),this.background="#ffffff"}drop(t){t.preventDefault(),t.stopPropagation(),this.background="#ffffff",this.fileDropped.emit(t)}static#n=this.\u0275fac=function(e){return new(e||u)};static#e=this.\u0275dir=n.lG2({type:u,selectors:[["","appDragDropFileUpload",""]],hostVars:2,hostBindings:function(e,o){1&e&&n.NdJ("dragover",function(l){return o.dragOver(l)})("dragleave",function(l){return o.dragLeave(l)})("drop",function(l){return o.drop(l)}),2&e&&n.Udp("background-color",o.background)},outputs:{fileDropped:"fileDropped"}})}class c{constructor(){}convertBytesToMegaBytes(t){for(var e=new Array("Bytes","KB","MB","GB"),o=0;t>900;)t/=1024,o++;return Math.round(100*t)/100+" "+e[o]}static#n=this.\u0275fac=function(e){return new(e||c)};static#e=this.\u0275prov=n.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}var U=r(6054);function T(a,t){1&a&&n._UZ(0,"app-loading-spinner",8)}function x(a,t){1&a&&(n.TgZ(0,"span",9),n._uU(1," task_alt "),n.qZA())}const F=function(a,t){return{show:a,uploading:t}},Z=function(a){return{show:a}};function w(a,t){if(1&a){const e=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"p",3),n.NdJ("click",function(){n.CHM(e);const i=n.oxw();return n.KtG(i.removed())}),n._uU(3,"x"),n.qZA()(),n.TgZ(4,"img",4),n.NdJ("load",function(){n.CHM(e);const i=n.oxw();return n.KtG(i.loading=!1)}),n.qZA(),n.YNc(5,T,1,0,"app-loading-spinner",5),n.YNc(6,x,2,0,"span",6),n.TgZ(7,"div",7)(8,"p"),n._uU(9),n.qZA(),n.TgZ(10,"p"),n._uU(11),n.qZA()()()}if(2&a){const e=n.oxw();n.Q6J("ngClass",n.WLB(7,F,!e.loading,e.file.uploading)),n.xp6(4),n.Q6J("ngClass",n.VKq(10,Z,!e.loading))("src",e.file.imageSrc,n.LSH),n.xp6(1),n.Q6J("ngIf",e.loading||e.file.uploading),n.xp6(1),n.Q6J("ngIf",e.file.uploaded),n.xp6(3),n.Oqu(e.file.type),n.xp6(2),n.Oqu(e.bytes)}}class _{constructor(t){this.utilsService=t,this.file=void 0,this.onRemoved=new n.vpe,this.loading=!0,this.bytes=""}ngOnInit(){!this.file||(this.bytes=this.utilsService.convertBytesToMegaBytes(this.file.size))}removed(){!this.file||this.onRemoved.emit(this.file.id)}static#n=this.\u0275fac=function(e){return new(e||_)(n.Y36(c))};static#e=this.\u0275cmp=n.Xpm({type:_,selectors:[["app-file-upload-token"]],inputs:{file:"file"},outputs:{onRemoved:"onRemoved"},decls:1,vars:1,consts:[["class","file-upload__container",3,"ngClass",4,"ngIf"],[1,"file-upload__container",3,"ngClass"],[1,"file-upload__information-container","file-upload__information-container-top"],[3,"click"],["loading","eager",1,"file-upload__thumbnail",3,"ngClass","src","load"],["class","file-upload__loading-spinner",4,"ngIf"],["class","material-symbols-outlined",4,"ngIf"],[1,"file-upload__information-container","file-upload__information-container-bottom"],[1,"file-upload__loading-spinner"],[1,"material-symbols-outlined"]],template:function(e,o){1&e&&n.YNc(0,w,12,12,"div",0),2&e&&n.Q6J("ngIf",o.file)},dependencies:[s.mk,s.O5,U.g],styles:['.file-upload__container[_ngcontent-%COMP%]{width:100%;min-width:60px;height:160px;display:flex;align-items:center;justify-content:center;flex-direction:column;background:#c8c8c8;border-radius:3px;overflow:hidden;position:relative}.file-upload__container.show[_ngcontent-%COMP%]{filter:drop-shadow(0px 3px 3px grey)}.file-upload__container.uploading[_ngcontent-%COMP%]{opacity:.5}.file-upload__container[_ngcontent-%COMP%]:hover   .file-upload__information-container[_ngcontent-%COMP%], .file-upload__container[_ngcontent-%COMP%]:active   .file-upload__information-container[_ngcontent-%COMP%]{opacity:1;pointer-events:all}.file-upload__container[_ngcontent-%COMP%]   .file-upload__thumbnail[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity .8s linear}.file-upload__container[_ngcontent-%COMP%]   .file-upload__thumbnail.show[_ngcontent-%COMP%]{opacity:1}.file-upload__container[_ngcontent-%COMP%]   .file-upload__loading-spinner[_ngcontent-%COMP%]{position:absolute;filter:none}.file-upload__container[_ngcontent-%COMP%]   .file-upload__information-container[_ngcontent-%COMP%]{width:100%;position:absolute;opacity:0;transition:opacity .3s linear;pointer-events:none}.file-upload__container[_ngcontent-%COMP%]   .file-upload__information-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;text-align:center;color:#fff;margin:0;padding:0}.file-upload__container[_ngcontent-%COMP%]   .file-upload__information-container-bottom[_ngcontent-%COMP%]{bottom:0;background:rgb(1,0,22);background:linear-gradient(0deg,rgb(1,0,0) 37%,rgba(1,0,0,.5102415966) 81%,rgba(0,0,0,0) 100%)}.file-upload__container[_ngcontent-%COMP%]   .file-upload__information-container-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{font-size:.6rem}.file-upload__container[_ngcontent-%COMP%]   .file-upload__information-container-top[_ngcontent-%COMP%]{top:0;background:rgb(1,0,22);background:linear-gradient(180deg,rgb(1,0,0) 37%,rgba(1,0,0,.5102415966) 81%,rgba(0,0,0,0) 100%)}.file-upload__container[_ngcontent-%COMP%]   .file-upload__information-container-top[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:right;padding-right:.5rem}.file-upload__container[_ngcontent-%COMP%]   .file-upload__information-container-top[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{cursor:pointer}.material-symbols-outlined[_ngcontent-%COMP%]{position:absolute;color:#fff;font-size:4rem;font-variation-settings:"FILL" 1,"wght" 700,"GRAD" 0,"opsz" 48}']})}function D(a,t){if(1&a){const e=n.EpF();n.TgZ(0,"app-button",7),n.NdJ("submit",function(){n.CHM(e);const i=n.oxw();return n.KtG(i.uploadFiles())}),n.qZA()}if(2&a){const e=n.oxw();n.Q6J("label",e.uploadString)("disabled",e.uploading)}}function k(a,t){if(1&a){const e=n.EpF();n.TgZ(0,"div",8)(1,"app-button",9),n.NdJ("submit",function(){n.CHM(e);const i=n.oxw();return n.KtG(i.reset())}),n.qZA(),n.TgZ(2,"app-button",9),n.NdJ("submit",function(){n.CHM(e);const i=n.oxw();return n.KtG(i.navigateToAdminMenu())}),n.qZA()()}2&a&&(n.xp6(1),n.Q6J("label","Upload More"),n.xp6(1),n.Q6J("label","Admin Menu"))}function A(a,t){if(1&a){const e=n.EpF();n.TgZ(0,"app-file-upload-token",10),n.NdJ("onRemoved",function(i){n.CHM(e);const l=n.oxw();return n.KtG(l.removeToken(i))}),n.qZA()}2&a&&n.Q6J("file",t.$implicit)}const B=function(a){return{disable:a}};class f{constructor(t,e,o){this.httpClient=t,this.authorisationService=e,this.router=o,this.filesUploaded=[],this.dropZoneMessage="",this.uploadString="Upload",this.success=!1,this.uploading=!1,this.dropZoneDefaultMessage="Drag your files here, or click here to upload"}ngOnInit(){this.dropZoneMessage=this.dropZoneDefaultMessage}addFileForUpload(t){var e=this;const o=t.target.files||t.dataTransfer.files;Object.keys(o).forEach(function(){var i=(0,C.Z)(function*(l){o[l].imageSrc=yield e.imageFileToBase64(o[l]),o[l].id=(0,b.Z)(),e.filesUploaded.push(o[l]),e.uploadString=`Upload ${e.filesUploaded.length} image${e.filesUploaded.length>1?"s":""}`});return function(l){return i.apply(this,arguments)}}())}uploadFiles(){var t=this;return(0,C.Z)(function*(){const e=yield t.authorisationService.getBearerToken();t.uploading=!0,t.dropZoneMessage="Uploading...",t.filesUploaded.forEach((o,i)=>{o.uploading=!0;const l=new FormData;l.append("file",o,o.name),t.httpClient.post("api/images",l,{headers:new M.WM({Authorization:e})}).subscribe({next:()=>{o.uploading=!1,o.uploaded=!0,i===t.filesUploaded.length-1&&(t.success=!0,t.dropZoneMessage=t.setSuccessMessage(!1))},error:()=>{t.dropZoneMessage=t.setSuccessMessage(!0)}})})})()}imageFileToBase64(t){return(0,C.Z)(function*(){return new Promise((e,o)=>{var i=new FileReader;i.readAsDataURL(t),i.onload=l=>{e(i.result)}})})()}reset(){this.dropZoneMessage=this.dropZoneDefaultMessage,this.success=!1,this.filesUploaded=[],this.uploading=!1}navigateToAdminMenu(){this.router.navigate(["/admin-dashboard"])}setSuccessMessage(t){return t?"There was an issue with one or more uploads. Please try again later":`${this.filesUploaded.length?this.filesUploaded.length:"0"} file${1!=this.filesUploaded.length?"s":""} successfully uploaded.`}removeToken(t){this.filesUploaded=this.filesUploaded.filter(e=>e.id!==t)}static#n=this.\u0275fac=function(e){return new(e||f)(n.Y36(M.eN),n.Y36(P.g),n.Y36(p.F0))};static#e=this.\u0275cmp=n.Xpm({type:f,selectors:[["app-file-upload"]],decls:8,vars:7,consts:[["appDragDropFileUpload","",1,"file-upload__drop-zone",3,"ngClass","fileDropped"],["for","upload-input"],["id","upload-input","type","file","multiple","",1,"file-upload__file-input",3,"change"],[3,"label","disabled","submit",4,"ngIf"],["class","file-upload__success-button-wrapper",4,"ngIf"],[1,"file-upload__token-wrapper"],[3,"file","onRemoved",4,"ngFor","ngForOf"],[3,"label","disabled","submit"],[1,"file-upload__success-button-wrapper"],[3,"label","submit"],[3,"file","onRemoved"]],template:function(e,o){1&e&&(n.TgZ(0,"div",0),n.NdJ("fileDropped",function(l){return o.uploading?"":o.addFileForUpload(l)}),n.TgZ(1,"label",1),n._uU(2),n.qZA(),n.TgZ(3,"input",2),n.NdJ("change",function(l){return o.addFileForUpload(l)}),n.qZA()(),n.YNc(4,D,1,2,"app-button",3),n.YNc(5,k,3,2,"div",4),n.TgZ(6,"div",5),n.YNc(7,A,1,1,"app-file-upload-token",6),n.qZA()),2&e&&(n.Q6J("ngClass",n.VKq(5,B,o.uploading)),n.xp6(2),n.Oqu(o.dropZoneMessage),n.xp6(2),n.Q6J("ngIf",o.filesUploaded.length>0&&!o.success),n.xp6(1),n.Q6J("ngIf",o.success),n.xp6(2),n.Q6J("ngForOf",o.filesUploaded))},dependencies:[s.mk,s.sg,s.O5,y.r,u,_],styles:["[_nghost-%COMP%]{display:block}.file-upload__drop-zone[_ngcontent-%COMP%]{width:100%;height:150px;border:1px solid #c8c8c8;border-radius:3px;display:flex;align-items:center;justify-content:center}.file-upload__drop-zone.disable[_ngcontent-%COMP%]{background:#ececec!important}.file-upload__drop-zone[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:center;color:gray}.file-upload__drop-zone[_ngcontent-%COMP%]   .file-upload__file-input[_ngcontent-%COMP%]{opacity:0;z-index:-1;position:absolute}.file-upload__success-message[_ngcontent-%COMP%]{color:green;text-align:center;margin-bottom:0}.file-upload__success-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.file-upload__success-button-wrapper[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{width:48%}.file-upload__token-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.file-upload__token-wrapper[_ngcontent-%COMP%]   app-file-upload-token[_ngcontent-%COMP%]{margin:.5rem}"]})}var J=r(8897);const z=function(){return["/admin-dashboard"]},I=function(){return["active"]};class g{static#n=this.\u0275fac=function(e){return new(e||g)};static#e=this.\u0275cmp=n.Xpm({type:g,selectors:[["app-admin-nav-bar"]],decls:3,vars:4,consts:[[1,"nav-bar__container"],[1,"nav-bar__link",3,"routerLink","routerLinkActive"]],template:function(e,o){1&e&&(n.TgZ(0,"ul",0)(1,"li",1),n._uU(2," Admin Dashboard "),n.qZA()()),2&e&&(n.xp6(1),n.Q6J("routerLink",n.DdM(2,z))("routerLinkActive",n.DdM(3,I)))},dependencies:[p.rH,p.Od],styles:[".nav-bar__container[_ngcontent-%COMP%]{list-style:none;display:flex;justify-content:space-evenly;font-family:La Belle Aurore,cursive;font-size:1rem;width:100%;padding:.5rem 0;margin:.2rem 0}.nav-bar__container[_ngcontent-%COMP%]   .nav-bar__link[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.nav-bar__container[_ngcontent-%COMP%]   .nav-bar__link[_ngcontent-%COMP%]:hover{cursor:pointer}@media screen and (max-height: 600px){.nav-bar__container[_ngcontent-%COMP%]{height:100%;width:-moz-fit-content;width:fit-content;flex-direction:column;padding:0 14px;margin:0;justify-content:space-evenly}.nav-bar__container[_ngcontent-%COMP%]   .nav-bar__link.active[_ngcontent-%COMP%]{font-weight:700}app-nav-bar-break[_ngcontent-%COMP%]{display:none}}"]})}class m{static#n=this.\u0275fac=function(e){return new(e||m)};static#e=this.\u0275cmp=n.Xpm({type:m,selectors:[["app-image-upload"]],decls:5,vars:0,consts:[[1,"image-manager__container"]],template:function(e,o){1&e&&(n._UZ(0,"app-admin-nav-bar"),n.TgZ(1,"div",0)(2,"app-page-title"),n._uU(3,"Image Upload"),n.qZA(),n._UZ(4,"app-file-upload"),n.qZA())},dependencies:[f,J.T,g],styles:[".image-manager__container[_ngcontent-%COMP%]{padding:0 1rem 1rem;display:flex;flex-direction:column;height:100%;align-items:center;padding:1rem}.image-manager__container[_ngcontent-%COMP%]   app-page-title[_ngcontent-%COMP%]{width:100%}.image-manager__container[_ngcontent-%COMP%]   app-file-upload[_ngcontent-%COMP%]{width:90%;margin-top:1rem}"]})}const N=[{path:"",component:m}];class h{static#n=this.\u0275fac=function(e){return new(e||h)};static#e=this.\u0275mod=n.oAB({type:h});static#t=this.\u0275inj=n.cJS({imports:[p.Bz.forChild(N),p.Bz]})}var S=r(9952),H=r(2873),L=r(7129);class v{static#n=this.\u0275fac=function(e){return new(e||v)};static#e=this.\u0275mod=n.oAB({type:v});static#t=this.\u0275inj=n.cJS({imports:[s.ez,h,S.O,H.p,L.d]})}},3522:(O,d,r)=>{r.d(d,{z:()=>n});var s=r(6895),p=r(8256);class n{static#n=this.\u0275fac=function(b){return new(b||n)};static#e=this.\u0275mod=p.oAB({type:n});static#t=this.\u0275inj=p.cJS({imports:[s.ez]})}}}]);